!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o,r,s,l,c,u=n(1),d=i(u),f=n(2),m=i(f),g=n(3),p=i(g),v=n(4),h=i(v),w=n(5),y=i(w);console.log("%c Kaola %c Copyright \xa9 2015-%s  Power by github/chinakids",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;font-size:64px;color:#00bbee;-webkit-text-fill-color:#00bbee;-webkit-text-stroke: 1px #00bbee;',"font-size:12px;color:#999999;",(new Date).getFullYear()),window.RM=function(){window.M&&window.M.layout()},(o=(r=(s=(l=(c=angular.module("Kaola",["Kaola.tools"])).controller.apply(c,a(d["default"]))).controller.apply(l,a(m["default"]))).controller.apply(s,a(p["default"]))).directive.apply(r,a(h["default"]))).directive.apply(o,a(y["default"]))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["IndexCtrl",["$scope","$http","$filter",function(e,t,n){$(window).scroll(function(){$(document).scrollTop()>=280?$(".navbar").removeClass("opacity"):$(".navbar").addClass("opacity")}),window.M=new Masonry(".js-masonry",{itemSelector:".grid-item",columnWidth:10});var i=function(e){for(var t in e)return e[t].url},a=function(e){for(var t=0,n=e.length;n>t;t++){console.log(e[t]);var a="\n            <li class='grid-item'>\n              <div class='img-box'>\n                <a class='img' href='/"+(e[t].info?"good":"article")+"/"+e[t]._id+"'>\n                  <img src='"+i(JSON.parse(e[t].imgList))+"' onload='RM()' onerror='this.src=\"fontend/img/bg/nopicture.jpg\"'/>\n                </a>\n                <p class='num'>\n                  <a class='watch-num' href='javascript:;'>\n                    <i class='fa fa-eye'></i> "+e[t].statistics.view+"\n                  </a>\n                  <a class='like-num' href='javascript:;'>\n                    <i class='fa fa-heart'></i> "+e[t].statistics.like+"\n                  </a>\n                </p>\n              </div>\n              <div class='clearfix'>\n                <a class='img-name' href='/"+("good"===e[t].type?"good":"article")+"/"+e[t]._id+"'>"+e[t].title+"</a>\n                "+(e[t].info?"<p class='sort'><i class='fa fa-location-arrow'></i> "+e[t].info.location+"</p>":"")+"\n                <a class='method clefafix' href='/users/"+e[t].author._id+"'>\n                  <span style='background-image:url("+e[t].author.avatar+");'></span>\n                  <b>"+e[t].author.nickName+"</b>\n                </a>\n              </div>\n            </li>";$(".js-masonry").append(a),window.M.reloadItems()}};a(window.list)}]];t["default"]=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["LoginCtrl",["$scope","$http","$filter",function(e,t,n){e.index="xx"}]];t["default"]=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["GoodCtrl",["$scope","$http","$filter",function(e,t,n){e.index="xx"}]];t["default"]=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["lazySrc",["$window","$document",function(e,t){var n=angular.element(e),i=t[0],a=!1,o=function(){var e=0,t={};return{push:function(n){t[e++]=n,setTimeout(function(){s(n)})},del:function(e){t[e]&&delete t[e]},size:function(){return Object.keys(t).length},get:function(){return t}}}(),r=function(e){var t=e[0].getBoundingClientRect(),a=!0;if(t.height>0&&t.width>0){var o=t.top>0&&t.top+t.height/3<Math.max(i.documentElement.clientHeight,n.innerHeight||0),r=t.left>0&&t.left+t.width/3<Math.max(i.documentElement.clientWidth,n.innerWidth||0);a=o&&r}return a},s=function c(e,t,i){return t>=0&&i?r(i.elem)?i.load(t):!1:void(0==o.size()?(n.off("scroll",c),n.off("resize",c),a=!1):angular.forEach(o.get(),function(e,t){r(e.elem)&&e.load(t)}))},l=function(){a===!1&&(a=!0,n.on("scroll",s),n.on("resize",s))};return{restrict:"A",scope:{},link:function(e,t,n){t[0].style.cssText&&t.data("cssText",t[0].style.cssText),t.css({"min-width":"1px","min-height":"1px"}),o.push({elem:t,load:function(i){return t.data("cssText")&&(t[0].style.cssText=t.data("cssText")),t.removeClass("ng-lazyload"),t.attr("src",n.lazySrc),i>=0&&o.del(i),e.$destroy(),!0}}),l()}}}]];t["default"]=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["imageSlide",["$window","$document",function(e,t){return{restrict:"EMAC",replace:!0,template:"\n          <div class='row margin-bottom image-box' ng-if='remove'>\n            <div class='col-sm-8'>\n              <div class='big-img'><img class='img-responsive' ng-src='{{showImage.url}}' alt='Photo'/></div>\n            </div>\n            <div class='col-sm-4'>\n              <div class='row'>\n                <div class='col-xs-6'>\n                <div class='small-img' ng-repeat='item in leftData track by $index'><img class='img-responsive' ng-src='{{item.url}}' ng-click='show(item)' alt='Photo'/></div>\n                </div>\n                <div class='col-xs-6'>\n                <div class='small-img' ng-repeat='item in rightData track by $index'><img class='img-responsive' ng-src='{{item.url}}' ng-click='show(item)' alt='Photo'/></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        ",controller:["$scope",function(e){e.rightData=[],e.leftData=[],e.remove=!0,e.showImage="",e.show=function(t){e.showImage=t}}],link:function(e,t,n){var i=JSON.parse(n.data),a=1;for(var o in i)1===a&&(e.showImage=i[o]),a%2===0?e.rightData.push(i[o]):e.leftData.push(i[o]),a++;1===a&&(e.remove=!1)}}}]];t["default"]=n}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwiYXJyMiIsImxlbmd0aCIsImZyb20iLCJfYW5ndWxhciRtb2R1bGUkY29udHIiLCJfYW5ndWxhciRtb2R1bGUkY29udHIyIiwiX2FuZ3VsYXIkbW9kdWxlJGNvbnRyMyIsIl9hbmd1bGFyJG1vZHVsZSRjb250cjQiLCJfYW5ndWxhciRtb2R1bGUiLCJfaW5kZXgiLCJfaW5kZXgyIiwiX2xvZ2luIiwiX2xvZ2luMiIsIl9nb29kIiwiX2dvb2QyIiwiX2xhenlJbWFnZSIsIl9sYXp5SW1hZ2UyIiwiX2ltYWdlU2xpZGUiLCJfaW1hZ2VTbGlkZTIiLCJjb25zb2xlIiwibG9nIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwid2luZG93IiwiUk0iLCJNIiwibGF5b3V0IiwiYW5ndWxhciIsImNvbnRyb2xsZXIiLCJhcHBseSIsImRpcmVjdGl2ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCIkc2NvcGUiLCIkaHR0cCIsIiRmaWx0ZXIiLCIkIiwic2Nyb2xsIiwiZG9jdW1lbnQiLCJzY3JvbGxUb3AiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiTWFzb25yeSIsIml0ZW1TZWxlY3RvciIsImNvbHVtbldpZHRoIiwiZ2V0Rmlyc3RJbWFnZSIsImxpc3QiLCJpdGVtIiwidXJsIiwiYWRkTWFzb25yeSIsImRhdGEiLCJsZW4iLCJ0ZW1wbGF0ZSIsImluZm8iLCJfaWQiLCJKU09OIiwicGFyc2UiLCJpbWdMaXN0Iiwic3RhdGlzdGljcyIsInZpZXciLCJsaWtlIiwidHlwZSIsInRpdGxlIiwibG9jYXRpb24iLCJhdXRob3IiLCJhdmF0YXIiLCJuaWNrTmFtZSIsImFwcGVuZCIsInJlbG9hZEl0ZW1zIiwiaW5kZXgiLCIkd2luIiwiJGRvYyIsIndpbiIsImVsZW1lbnQiLCJkb2MiLCJpc0xhenlMb2FkaW5nIiwiZWxlbWVudHMiLCJfdWlkIiwiX2xpc3QiLCJwdXNoIiwiX2RhdGEiLCJzZXRUaW1lb3V0IiwiY2hlY2tJbWFnZSIsImRlbCIsImtleSIsInNpemUiLCJrZXlzIiwiZ2V0IiwiaXNWaXNpYmxlIiwiZWxlbSIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJyZXQiLCJoZWlnaHQiLCJ3aWR0aCIsIngiLCJ0b3AiLCJNYXRoIiwibWF4IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJ5IiwibGVmdCIsImNsaWVudFdpZHRoIiwiaW5uZXJXaWR0aCIsImV2dCIsImxvYWQiLCJvZmYiLCJmb3JFYWNoIiwiaW5pdExhenlMb2FkIiwib24iLCJyZXN0cmljdCIsInNjb3BlIiwibGluayIsIiRlbGVtIiwiYXR0cnMiLCJzdHlsZSIsImNzc1RleHQiLCJjc3MiLCJtaW4td2lkdGgiLCJtaW4taGVpZ2h0IiwiYXR0ciIsImxhenlTcmMiLCIkZGVzdHJveSIsInJlcGxhY2UiLCJyaWdodERhdGEiLCJsZWZ0RGF0YSIsInJlbW92ZSIsInNob3dJbWFnZSIsInNob3ciXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdBS1QsUUFBU0MsR0FBb0JDLEdBRzVCLEdBQUdDLEVBQWlCRCxHQUNuQixNQUFPQyxHQUFpQkQsR0FBVUUsT0FHbkMsSUFBSUMsR0FBU0YsRUFBaUJELElBQzdCRSxXQUNBRSxHQUFJSixFQUNKSyxRQUFRLEVBVVQsT0FOQVAsR0FBUUUsR0FBVU0sS0FBS0gsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0gsR0FHL0RJLEVBQU9FLFFBQVMsRUFHVEYsRUFBT0QsUUF2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LEdBQU1qRSxLQUFLLGFBQWVpRSxFQUFNLEdBQUdFLE1BQU1DLFFBQVVILEVBQU1qRSxLQUFLLFlBQzlEaUUsRUFBTTNFLFlBQVksZUFDbEIyRSxFQUFNTyxLQUFLLE1BQU9OLEVBQU1PLFNBQ3hCdkMsR0FBTyxHQUFLUixFQUFTTyxJQUFJQyxHQUN6Qm5ELEVBQU8yRixZQUNBLEtBR1hkLFFBSU4vSCxHQUFBQSxXQUFrQjhDLEdBSWIsU0FBUzdDLEVBQVFELEdBRXRCLFlBRUErQyxRQUFPQyxlQUFlaEQsRUFBUyxjQUM3QmlELE9BQU8sR0FFVCxJQUFJSCxJQUFhLGNBQWUsVUFBVyxZQUFhLFNBQVV5QyxFQUFNQyxHQUN0RSxPQUNFeUMsU0FBVSxPQUNWYSxTQUFTLEVBQ1R6RSxTQUFVLDQxQkFDVnpCLFlBQWEsU0FBVSxTQUFVTSxHQUMvQkEsRUFBTzZGLGFBQ1A3RixFQUFPOEYsWUFDUDlGLEVBQU8rRixRQUFTLEVBQ2hCL0YsRUFBT2dHLFVBQVksR0FDbkJoRyxFQUFPaUcsS0FBTyxTQUFVMUksR0FDdEJ5QyxFQUFPZ0csVUFBWXpJLEtBR3ZCMEgsS0FBTSxTQUFjakYsRUFBUWtGLEVBQU9DLEdBQ2pDLEdBQUlsRSxHQUFPSyxLQUFLQyxNQUFNNEQsRUFBTWxFLE1BQ3hCbUIsRUFBUSxDQUNaLEtBQUssR0FBSXRCLEtBQVFHLEdBQ0QsSUFBVm1CLElBQWFwQyxFQUFPZ0csVUFBWS9FLEVBQUtILElBQ3JDc0IsRUFBUSxJQUFNLEVBQ2hCcEMsRUFBTzZGLFVBQVUvQyxLQUFLN0IsRUFBS0gsSUFFM0JkLEVBQU84RixTQUFTaEQsS0FBSzdCLEVBQUtILElBRTVCc0IsR0FFWSxLQUFWQSxJQUFhcEMsRUFBTytGLFFBQVMsT0FJdkNqSixHQUFBQSxXQUFrQjhDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG5cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG5cblxuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIF9hbmd1bGFyJG1vZHVsZSRjb250ciwgX2FuZ3VsYXIkbW9kdWxlJGNvbnRyMiwgX2FuZ3VsYXIkbW9kdWxlJGNvbnRyMywgX2FuZ3VsYXIkbW9kdWxlJGNvbnRyNCwgX2FuZ3VsYXIkbW9kdWxlO1xuXG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXG5cdHZhciBfbG9naW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG5cdHZhciBfbG9naW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9naW4pO1xuXG5cdHZhciBfZ29vZCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cblx0dmFyIF9nb29kMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dvb2QpO1xuXG5cdHZhciBfbGF6eUltYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuXHR2YXIgX2xhenlJbWFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sYXp5SW1hZ2UpO1xuXG5cdHZhciBfaW1hZ2VTbGlkZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cblx0dmFyIF9pbWFnZVNsaWRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ltYWdlU2xpZGUpO1xuXG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cblx0ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cdC8v5o6n5Yi25ZmoXG5cblx0Ly/mjIfku6Tpm4ZcblxuXG5cdGNvbnNvbGUubG9nKCclYyBLYW9sYSAlYyBDb3B5cmlnaHQgXFx4YTkgMjAxNS0lcyAgUG93ZXIgYnkgZ2l0aHViL2NoaW5ha2lkcycsICdmb250LWZhbWlseTogXCJIZWx2ZXRpY2EgTmV1ZVwiLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO2ZvbnQtc2l6ZTo2NHB4O2NvbG9yOiMwMGJiZWU7LXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IzAwYmJlZTstd2Via2l0LXRleHQtc3Ryb2tlOiAxcHggIzAwYmJlZTsnLCBcImZvbnQtc2l6ZToxMnB4O2NvbG9yOiM5OTk5OTk7XCIsIG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSk7XG5cblx0d2luZG93LlJNID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh3aW5kb3cuTSkgd2luZG93Lk0ubGF5b3V0KCk7XG5cdH07XG5cblx0KF9hbmd1bGFyJG1vZHVsZSRjb250ciA9IChfYW5ndWxhciRtb2R1bGUkY29udHIyID0gKF9hbmd1bGFyJG1vZHVsZSRjb250cjMgPSAoX2FuZ3VsYXIkbW9kdWxlJGNvbnRyNCA9IChfYW5ndWxhciRtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnS2FvbGEnLCBbJ0thb2xhLnRvb2xzJ10pKS5jb250cm9sbGVyLmFwcGx5KF9hbmd1bGFyJG1vZHVsZSwgX3RvQ29uc3VtYWJsZUFycmF5KF9pbmRleDIuZGVmYXVsdCkpKS5jb250cm9sbGVyLmFwcGx5KF9hbmd1bGFyJG1vZHVsZSRjb250cjQsIF90b0NvbnN1bWFibGVBcnJheShfbG9naW4yLmRlZmF1bHQpKSkuY29udHJvbGxlci5hcHBseShfYW5ndWxhciRtb2R1bGUkY29udHIzLCBfdG9Db25zdW1hYmxlQXJyYXkoX2dvb2QyLmRlZmF1bHQpKSkuZGlyZWN0aXZlLmFwcGx5KF9hbmd1bGFyJG1vZHVsZSRjb250cjIsIF90b0NvbnN1bWFibGVBcnJheShfbGF6eUltYWdlMi5kZWZhdWx0KSkpLmRpcmVjdGl2ZS5hcHBseShfYW5ndWxhciRtb2R1bGUkY29udHIsIF90b0NvbnN1bWFibGVBcnJheShfaW1hZ2VTbGlkZTIuZGVmYXVsdCkpO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHR2YXIgY29udHJvbGxlciA9IFsnSW5kZXhDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnJGZpbHRlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkZmlsdGVyKSB7XG5cdCAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPj0gMjgwKSB7XG5cdCAgICAgICQoJy5uYXZiYXInKS5yZW1vdmVDbGFzcygnb3BhY2l0eScpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgJCgnLm5hdmJhcicpLmFkZENsYXNzKCdvcGFjaXR5Jyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgd2luZG93Lk0gPSBuZXcgTWFzb25yeSgnLmpzLW1hc29ucnknLCB7XG5cdCAgICAvLyBvcHRpb25zLi4uXG5cdCAgICBpdGVtU2VsZWN0b3I6ICcuZ3JpZC1pdGVtJyxcblx0ICAgIGNvbHVtbldpZHRoOiAxMFxuXHQgIH0pO1xuXHQgIHZhciBnZXRGaXJzdEltYWdlID0gZnVuY3Rpb24gZ2V0Rmlyc3RJbWFnZShsaXN0KSB7XG5cdCAgICBmb3IgKHZhciBpdGVtIGluIGxpc3QpIHtcblx0ICAgICAgcmV0dXJuIGxpc3RbaXRlbV0udXJsO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9O1xuXHQgIHZhciBhZGRNYXNvbnJ5ID0gZnVuY3Rpb24gYWRkTWFzb25yeShkYXRhKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICBjb25zb2xlLmxvZyhkYXRhW2ldKTtcblx0ICAgICAgdmFyIHRlbXBsYXRlID0gJ1xcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cXCdncmlkLWl0ZW1cXCc+XFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcJ2ltZy1ib3hcXCc+XFxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcJ2ltZ1xcJyBocmVmPVxcJy8nICsgKGRhdGFbaV0uaW5mbyA/ICdnb29kJyA6ICdhcnRpY2xlJykgKyAnLycgKyBkYXRhW2ldLl9pZCArICdcXCc+XFxuICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XFwnJyArIGdldEZpcnN0SW1hZ2UoSlNPTi5wYXJzZShkYXRhW2ldLmltZ0xpc3QpKSArICdcXCcgb25sb2FkPVxcJ1JNKClcXCcgb25lcnJvcj1cXCd0aGlzLnNyYz1cImZvbnRlbmQvaW1nL2JnL25vcGljdHVyZS5qcGdcIlxcJy8+XFxuICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XFwnbnVtXFwnPlxcbiAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcJ3dhdGNoLW51bVxcJyBocmVmPVxcJ2phdmFzY3JpcHQ6O1xcJz5cXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcJ2ZhIGZhLWV5ZVxcJz48L2k+ICcgKyBkYXRhW2ldLnN0YXRpc3RpY3MudmlldyArICdcXG4gICAgICAgICAgICAgICAgICA8L2E+XFxuICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFwnbGlrZS1udW1cXCcgaHJlZj1cXCdqYXZhc2NyaXB0OjtcXCc+XFxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXCdmYSBmYS1oZWFydFxcJz48L2k+ICcgKyBkYXRhW2ldLnN0YXRpc3RpY3MubGlrZSArICdcXG4gICAgICAgICAgICAgICAgICA8L2E+XFxuICAgICAgICAgICAgICAgIDwvcD5cXG4gICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXCdjbGVhcmZpeFxcJz5cXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XFwnaW1nLW5hbWVcXCcgaHJlZj1cXCcvJyArIChkYXRhW2ldLnR5cGUgPT09ICdnb29kJyA/ICdnb29kJyA6ICdhcnRpY2xlJykgKyAnLycgKyBkYXRhW2ldLl9pZCArICdcXCc+JyArIGRhdGFbaV0udGl0bGUgKyAnPC9hPlxcbiAgICAgICAgICAgICAgICAnICsgKGRhdGFbaV0uaW5mbyA/ICc8cCBjbGFzcz1cXCdzb3J0XFwnPjxpIGNsYXNzPVxcJ2ZhIGZhLWxvY2F0aW9uLWFycm93XFwnPjwvaT4gJyArIGRhdGFbaV0uaW5mby5sb2NhdGlvbiArICc8L3A+JyA6ICcnKSArICdcXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XFwnbWV0aG9kIGNsZWZhZml4XFwnIGhyZWY9XFwnL3VzZXJzLycgKyBkYXRhW2ldLmF1dGhvci5faWQgKyAnXFwnPlxcbiAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVxcJ2JhY2tncm91bmQtaW1hZ2U6dXJsKCcgKyBkYXRhW2ldLmF1dGhvci5hdmF0YXIgKyAnKTtcXCc+PC9zcGFuPlxcbiAgICAgICAgICAgICAgICAgIDxiPicgKyBkYXRhW2ldLmF1dGhvci5uaWNrTmFtZSArICc8L2I+XFxuICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvbGk+Jztcblx0ICAgICAgJCgnLmpzLW1hc29ucnknKS5hcHBlbmQodGVtcGxhdGUpO1xuXHQgICAgICB3aW5kb3cuTS5yZWxvYWRJdGVtcygpO1xuXHQgICAgfTtcblx0ICB9O1xuXHQgIGFkZE1hc29ucnkod2luZG93Lmxpc3QpO1xuXHR9XV07XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGNvbnRyb2xsZXI7XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdHZhciBjb250cm9sbGVyID0gWydMb2dpbkN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsICckZmlsdGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRmaWx0ZXIpIHtcblx0ICAkc2NvcGUuaW5kZXggPSAneHgnO1xuXHR9XV07XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGNvbnRyb2xsZXI7XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdHZhciBjb250cm9sbGVyID0gWydHb29kQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJyRmaWx0ZXInLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGZpbHRlcikge1xuXHQgICRzY29wZS5pbmRleCA9ICd4eCc7XG5cdH1dXTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gY29udHJvbGxlcjtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0dmFyIGRpcmVjdGl2ZSA9IFsnbGF6eVNyYycsIFsnJHdpbmRvdycsICckZG9jdW1lbnQnLCBmdW5jdGlvbiAoJHdpbiwgJGRvYykge1xuXHQgIHZhciB3aW4gPSBhbmd1bGFyLmVsZW1lbnQoJHdpbik7XG5cdCAgdmFyIGRvYyA9ICRkb2NbMF07XG5cdCAgdmFyIGlzTGF6eUxvYWRpbmcgPSBmYWxzZTtcblx0ICAvL+eUqOadpee7tOaKpOW9k+WJjemcgOimgWxhenlsb2Fk55qE5Zu+54mH6ZuG5ZCIXG5cdCAgdmFyIGVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF91aWQgPSAwO1xuXHQgICAgdmFyIF9saXN0ID0ge307XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBwdXNoOiBmdW5jdGlvbiBwdXNoKF9kYXRhKSB7XG5cdCAgICAgICAgX2xpc3RbX3VpZCsrXSA9IF9kYXRhO1xuXHQgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgY2hlY2tJbWFnZShfZGF0YSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGRlbDogZnVuY3Rpb24gZGVsKGtleSkge1xuXHQgICAgICAgIF9saXN0W2tleV0gJiYgZGVsZXRlIF9saXN0W2tleV07XG5cdCAgICAgIH0sXG5cdCAgICAgIHNpemU6IGZ1bmN0aW9uIHNpemUoKSB7XG5cdCAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKF9saXN0KS5sZW5ndGg7XG5cdCAgICAgIH0sXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBfbGlzdDtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9KCk7XG5cdCAgLy/liKTmlq3lm77niYflhYPntKDmmK/lkKblnKjlj6/op4bljLrln5/lhoXvvIzlpoLmnpzotoXlh7oxLzPlj6/op4HvvIzliJnmmL7npLpcblx0ICB2YXIgaXNWaXNpYmxlID0gZnVuY3Rpb24gaXNWaXNpYmxlKGVsZW0pIHtcblx0ICAgIHZhciByZWN0ID0gZWxlbVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICAgIHZhciByZXQgPSB0cnVlO1xuXHQgICAgaWYgKHJlY3QuaGVpZ2h0ID4gMCAmJiByZWN0LndpZHRoID4gMCkge1xuXHQgICAgICB2YXIgeCA9IHJlY3QudG9wID4gMCAmJiByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMyA8IE1hdGgubWF4KGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW4uaW5uZXJIZWlnaHQgfHwgMCk7XG5cdCAgICAgIHZhciB5ID0gcmVjdC5sZWZ0ID4gMCAmJiByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMyA8IE1hdGgubWF4KGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsIHdpbi5pbm5lcldpZHRoIHx8IDApO1xuXHQgICAgICByZXQgPSB4ICYmIHk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmV0O1xuXHQgIH07XG5cdCAgLy/mr4/mrKFzY3JvbGzml7bvvIzosIPnlKhjaGVja0ltYWdl77yM5b6q546v5qOA5p+l5Zu+54mHXG5cdCAgdmFyIGNoZWNrSW1hZ2UgPSBmdW5jdGlvbiBjaGVja0ltYWdlKGV2dCwgaSwgaXRlbSkge1xuXHQgICAgaWYgKGkgPj0gMCAmJiBpdGVtKSB7XG5cdCAgICAgIHJldHVybiBpc1Zpc2libGUoaXRlbS5lbGVtKSA/IGl0ZW0ubG9hZChpKSA6IGZhbHNlOyAvL+aMh+WumuajgOafpe+8jOi/lOWbnuaYr+WQpuaYvuekulxuXHQgICAgfSBlbHNlIGlmIChlbGVtZW50cy5zaXplKCkgPT0gMCkge1xuXHQgICAgICAgIC8v5YWo6YOo5pi+56S65LmL5ZCO77yM6Kej6Zmk57uR5a6aXG5cdCAgICAgICAgd2luLm9mZignc2Nyb2xsJywgY2hlY2tJbWFnZSk7XG5cdCAgICAgICAgd2luLm9mZigncmVzaXplJywgY2hlY2tJbWFnZSk7XG5cdCAgICAgICAgaXNMYXp5TG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChlbGVtZW50cy5nZXQoKSwgZnVuY3Rpb24gKGl0ZW0sIGtleSkge1xuXHQgICAgICAgICAgLy/lvqrnjq/mo4Dmn6Vcblx0ICAgICAgICAgIGlzVmlzaWJsZShpdGVtLmVsZW0pICYmIGl0ZW0ubG9hZChrZXkpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgfTtcblx0ICAvL+WIneWni+WMlu+8jOe7keWumnNjcm9sbFxuXHQgIC8v5aaC5p6c5bey57uP5YWo6YOo5pi+56S65LqG77yM5Lyab2Zm77yM6Iul5pyJ5paw55qE5oyH5Luk77yIYWpheOOAgWpz6L295YWl6ZyA6KaBbGF6eWxvYWTnmoTlhoXlrrnvvInvvIzkvJrph43mlrDnu5HlrppzY3JvbGxcblx0ICB2YXIgaW5pdExhenlMb2FkID0gZnVuY3Rpb24gaW5pdExhenlMb2FkKCkge1xuXHQgICAgaWYgKGlzTGF6eUxvYWRpbmcgPT09IGZhbHNlKSB7XG5cdCAgICAgIGlzTGF6eUxvYWRpbmcgPSB0cnVlO1xuXHQgICAgICB3aW4ub24oJ3Njcm9sbCcsIGNoZWNrSW1hZ2UpO1xuXHQgICAgICB3aW4ub24oJ3Jlc2l6ZScsIGNoZWNrSW1hZ2UpO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJlc3RyaWN0OiAnQScsIC8v5LuF5Y+v5Lul5L2/55SoICBhdHRyXG5cdCAgICBzY29wZToge30sIC8v54us56uL55qEc2NvcGVcblx0ICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoJHNjb3BlLCAkZWxlbSwgYXR0cnMpIHtcblx0ICAgICAgJGVsZW1bMF0uc3R5bGUuY3NzVGV4dCAmJiAkZWxlbS5kYXRhKCdjc3NUZXh0JywgJGVsZW1bMF0uc3R5bGUuY3NzVGV4dCk7XG5cdCAgICAgICRlbGVtLmNzcyh7ICdtaW4td2lkdGgnOiAnMXB4JywgJ21pbi1oZWlnaHQnOiAnMXB4JyB9KTtcblx0ICAgICAgLy/kvKDlm57osIPlj4LmlbDvvIzkuI0kd2F0Y2gg54q25oCB77yM5Lul5YWN5aKe5Yqg6L+H5aSaXG5cdCAgICAgIGVsZW1lbnRzLnB1c2goe1xuXHQgICAgICAgIGVsZW06ICRlbGVtLFxuXHQgICAgICAgIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoa2V5KSB7XG5cdCAgICAgICAgICAkZWxlbS5kYXRhKCdjc3NUZXh0JykgJiYgKCRlbGVtWzBdLnN0eWxlLmNzc1RleHQgPSAkZWxlbS5kYXRhKCdjc3NUZXh0JykpO1xuXHQgICAgICAgICAgJGVsZW0ucmVtb3ZlQ2xhc3MoJ25nLWxhenlsb2FkJyk7XG5cdCAgICAgICAgICAkZWxlbS5hdHRyKCdzcmMnLCBhdHRycy5sYXp5U3JjKTtcblx0ICAgICAgICAgIGtleSA+PSAwICYmIGVsZW1lbnRzLmRlbChrZXkpO1xuXHQgICAgICAgICAgJHNjb3BlLiRkZXN0cm95KCk7XG5cdCAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBpbml0TGF6eUxvYWQoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XV07XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGRpcmVjdGl2ZTtcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0dmFyIGRpcmVjdGl2ZSA9IFsnaW1hZ2VTbGlkZScsIFsnJHdpbmRvdycsICckZG9jdW1lbnQnLCBmdW5jdGlvbiAoJHdpbiwgJGRvYykge1xuXHQgIHJldHVybiB7XG5cdCAgICByZXN0cmljdDogJ0VNQUMnLFxuXHQgICAgcmVwbGFjZTogdHJ1ZSxcblx0ICAgIHRlbXBsYXRlOiAnXFxuICAgICAgICAgIDxkaXYgY2xhc3M9XFwncm93IG1hcmdpbi1ib3R0b20gaW1hZ2UtYm94XFwnIG5nLWlmPVxcJ3JlbW92ZVxcJz5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcJ2NvbC1zbS04XFwnPlxcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXCdiaWctaW1nXFwnPjxpbWcgY2xhc3M9XFwnaW1nLXJlc3BvbnNpdmVcXCcgbmctc3JjPVxcJ3t7c2hvd0ltYWdlLnVybH19XFwnIGFsdD1cXCdQaG90b1xcJy8+PC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXCdjb2wtc20tNFxcJz5cXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFwncm93XFwnPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcJ2NvbC14cy02XFwnPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcJ3NtYWxsLWltZ1xcJyBuZy1yZXBlYXQ9XFwnaXRlbSBpbiBsZWZ0RGF0YSB0cmFjayBieSAkaW5kZXhcXCc+PGltZyBjbGFzcz1cXCdpbWctcmVzcG9uc2l2ZVxcJyBuZy1zcmM9XFwne3tpdGVtLnVybH19XFwnIG5nLWNsaWNrPVxcJ3Nob3coaXRlbSlcXCcgYWx0PVxcJ1Bob3RvXFwnLz48L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFwnY29sLXhzLTZcXCc+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFwnc21hbGwtaW1nXFwnIG5nLXJlcGVhdD1cXCdpdGVtIGluIHJpZ2h0RGF0YSB0cmFjayBieSAkaW5kZXhcXCc+PGltZyBjbGFzcz1cXCdpbWctcmVzcG9uc2l2ZVxcJyBuZy1zcmM9XFwne3tpdGVtLnVybH19XFwnIG5nLWNsaWNrPVxcJ3Nob3coaXRlbSlcXCcgYWx0PVxcJ1Bob3RvXFwnLz48L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgPC9kaXY+XFxuICAgICAgICAnLFxuXHQgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG5cdCAgICAgICRzY29wZS5yaWdodERhdGEgPSBbXTtcblx0ICAgICAgJHNjb3BlLmxlZnREYXRhID0gW107XG5cdCAgICAgICRzY29wZS5yZW1vdmUgPSB0cnVlO1xuXHQgICAgICAkc2NvcGUuc2hvd0ltYWdlID0gJyc7XG5cdCAgICAgICRzY29wZS5zaG93ID0gZnVuY3Rpb24gKG9iaikge1xuXHQgICAgICAgICRzY29wZS5zaG93SW1hZ2UgPSBvYmo7XG5cdCAgICAgIH07XG5cdCAgICB9XSxcblx0ICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoJHNjb3BlLCAkZWxlbSwgYXR0cnMpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGF0dHJzLmRhdGEpO1xuXHQgICAgICB2YXIgaW5kZXggPSAxO1xuXHQgICAgICBmb3IgKHZhciBpdGVtIGluIGRhdGEpIHtcblx0ICAgICAgICBpZiAoaW5kZXggPT09IDEpICRzY29wZS5zaG93SW1hZ2UgPSBkYXRhW2l0ZW1dO1xuXHQgICAgICAgIGlmIChpbmRleCAlIDIgPT09IDApIHtcblx0ICAgICAgICAgICRzY29wZS5yaWdodERhdGEucHVzaChkYXRhW2l0ZW1dKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgJHNjb3BlLmxlZnREYXRhLnB1c2goZGF0YVtpdGVtXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGluZGV4Kys7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGluZGV4ID09PSAxKSAkc2NvcGUucmVtb3ZlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgfTtcblx0fV1dO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBkaXJlY3RpdmU7XG5cbi8qKiovIH1cbi8qKioqKiovIF0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
